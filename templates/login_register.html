<!DOCTYPE html>
{% load static %}
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Đăng Nhập</title>
    <!-- Liên kết tới Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'styles/login.css' %}">
</head>
<body>
    {% if messages %}

    <ul class="messages">
        {% for message in messages %}
        <li class="{{message.tags}}">{{message}}</li>
        {% endfor %}
    </ul>

    {% endif %}

    <div class="container d-flex justify-content-center align-items-center center-container">
        <div class="w-100" style="max-width: 400px;">
            <div class="text-center mb-4">
                <button id="btnGiangVien" class="btn btn-primary">Giảng viên</button>
                <button id="btnSinhVien" class="btn btn-secondary">Sinh viên</button>
            </div>

            <div id="formGiangVien">
                <form action="{% url 'login-gv' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="gv_coso">Chọn cơ sở:</label>
                        <select class="form-control" id="gv_coso" name="gv_coso">
                            {% for cs in danhsach_cs %}
                            <option>{{cs}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="giangvienUsername">Username:</label>
                        <input type="text" class="form-control" id="giangvienUsername" name="giangvienUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="giangvienPassword">Password:</label>
                        <input type="password" class="form-control" id="giangvienPassword" name="giangvienPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Đăng nhập</button>
                </form>
            </div>

            <div id="formSinhVien" class="hidden">
                <form id="formDangNhap" action="{% url 'login-sv' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="sv_coso">Chọn cơ sở:</label>
                        <select class="form-control" id="sv_coso" name="sv_coso">
                            {% for cs in danhsach_cs %}
                            <option>{{cs}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sinhvienUsername">Username:</label>
                        <input type="text" class="form-control" id="sinhvienUsername" name="sinhvienUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="sinhvienPassword">Password:</label>
                        <input type="password" class="form-control" id="sinhvienPassword" name="sinhvienPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Đăng nhập</button>
                    <button type="button" id="toggleDangKy" class="btn btn-sm btn-secondary">Đăng ký</button>
                </form>

                <form id="formDangKy" class="hidden" action="{% url 'register-sv' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="masinhvien">Mã sinh viên:</label>
                        <select class="form-control" id="masinhvien" name="masinhvien">
                            {% for sv in danhsach_sv %}
                            <option>{{sv.0}} | {{sv.2}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dangkyPassword">Password:</label>
                        <input type="password" class="form-control" id="dangkyPassword" name="dangkyPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Đăng ký</button>
                    <button type="button" id="toggleDangNhap" class="btn btn-sm btn-secondary">Đăng nhập</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Tin nhắn thông báo -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const messages = document.querySelectorAll(".messages li");
            messages.forEach((message, index) => {
                setTimeout(() => {
                    message.style.opacity = 1;
                    setTimeout(() => {
                        message.style.opacity = 0;
                        setTimeout(() => {
                            message.remove();
                        }, 500); // Duration for fade out
                    }, 5000); // Duration for display
                }, index * 3000); // Staggered display
            });
        });
    </script>

    <!-- Liên kết tới jQuery và Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#btnGiangVien').click(function() {
                $('#formGiangVien').removeClass('hidden');
                $('#formSinhVien').addClass('hidden');
                $('#formDangKy').addClass('hidden');
            });

            $('#btnSinhVien').click(function() {
                $('#formSinhVien').removeClass('hidden');
                $('#formDangNhap').removeClass('hidden');
                $('#formDangKy').addClass('hidden');
                $('#formGiangVien').addClass('hidden');
                $('#formDangKy').addClass('hidden');
            });

            $('#toggleDangKy').click(function() {
                $('#formDangKy').removeClass('hidden');
                $('#formDangNhap').addClass('hidden');
            });

            $('#toggleDangNhap').click(function() {
                $('#formDangNhap').removeClass('hidden');
                $('#formDangKy').addClass('hidden');
            });
        });
    </script>
</body>
</html>
